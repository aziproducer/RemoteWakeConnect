<Window x:Class="RemoteWakeConnect.Dialogs.SessionWarningDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="セッション確認" 
        Height="450" 
        Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- ヘッダー -->
        <Border Grid.Row="0" 
                x:Name="HeaderBorder"
                Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- アイコン -->
                <TextBlock Grid.Column="0" 
                           x:Name="IconText"
                           FontSize="24" 
                           Margin="0,0,10,0"
                           VerticalAlignment="Center"/>
                
                <!-- タイトル -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock x:Name="TitleText" 
                               FontSize="18" 
                               FontWeight="Bold"/>
                    <TextBlock x:Name="SubtitleText" 
                               FontSize="12" 
                               Foreground="Gray"
                               Margin="0,2,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- メッセージエリア -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      Padding="15">
            <StackPanel>
                <!-- メインメッセージ -->
                <TextBlock x:Name="MessageText" 
                           TextWrapping="Wrap"
                           FontSize="13"
                           LineHeight="20"/>
                
                <!-- セッション詳細 -->
                <Border x:Name="SessionDetailBorder"
                        BorderBrush="LightGray"
                        BorderThickness="1"
                        CornerRadius="3"
                        Margin="0,15,0,0"
                        Padding="10"
                        Background="#F9F9F9"
                        Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="現在のセッション:" 
                                   FontWeight="Bold"
                                   Margin="0,0,0,5"/>
                        <ItemsControl x:Name="SessionList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="20"/>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="100"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Grid.Column="0" Text="•" />
                                        <TextBlock Grid.Column="1" Text="{Binding FullUserName}" FontWeight="Bold"/>
                                        <TextBlock Grid.Column="2" Text="{Binding SessionName}" Foreground="Gray"/>
                                        <TextBlock Grid.Column="3" Text="{Binding State}" Foreground="DarkBlue"/>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>
                
                <!-- 追加情報 -->
                <TextBlock x:Name="AdditionalInfoText"
                           TextWrapping="Wrap"
                           FontSize="12"
                           Foreground="Gray"
                           Margin="0,15,0,0"
                           Visibility="Collapsed"/>
            </StackPanel>
        </ScrollViewer>
        
        <!-- ボタンエリア -->
        <Border Grid.Row="2" 
                Background="#F5F5F5"
                BorderBrush="LightGray"
                BorderThickness="0,1,0,0">
            <Grid Margin="15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- 詳細表示チェックボックス -->
                <CheckBox x:Name="ShowDetailsCheckBox"
                          Grid.Column="0"
                          Content="詳細を表示"
                          VerticalAlignment="Center"
                          Checked="ShowDetailsCheckBox_Checked"
                          Unchecked="ShowDetailsCheckBox_Unchecked"/>
                
                <!-- ボタン -->
                <Button x:Name="ConnectButton"
                        Grid.Column="2"
                        Content="接続する"
                        Width="100"
                        Height="30"
                        Margin="0,0,10,0"
                        FontWeight="Bold"
                        Click="ConnectButton_Click"/>
                
                <Button x:Name="CancelButton"
                        Grid.Column="3"
                        Content="キャンセル"
                        Width="100"
                        Height="30"
                        IsCancel="True"
                        Click="CancelButton_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>